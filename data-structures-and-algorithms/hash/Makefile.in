######################################################################
# Variables.
# This is where all the variables are set 
######################################################################
include Makefile.var

LAST_MAKEFILE := $(abspath $(lastword $(MAKEFILE_LIST)))
SRC_DIR := $(patsubst %/,%,$(dir $(LAST_MAKEFILE))) 
ROOT_PATH := $(patsubst %/,%,$(dir $(SRC_DIR)))

#
# GNU
# -------------------------------------- #
# -------------------------------------- #
SHELL:= /bin/bash
.RECIPEPREFIX := >

#
# Filetypes
# -------------------------------------- #
# -------------------------------------- #
.SUFFIXES:
.SUFFIXES: .c .C .cpp .o

#
# Source search 
# -------------------------------------- #
# -------------------------------------- #
deep_source_search = $(foreach dir,$(subdirs),$(wildcard $(dir)/*.$(1)))
deep_includes_search = $(foreach dir,$(include_dirs),$(wildcard $(dir)/*.$(1)))

#
# Headers
# -------------------------------------- #
# -------------------------------------- #
h := $(wildcard *.h) $(call deep_includes_search,$(h_ext))
hpp := $(wildcard *.hpp) $(call deep_includes_search,$(hpp_ext))

incs := $(h) $(hpp)

#
# Sources
# -------------------------------------- #
# -------------------------------------- #
c_srcs := $(wildcard *.c) $(call deep_source_search,$(c_ext))
cpp_srcs := $(wildcard *.cpp) $(call deep_source_search,$(cpp_ext))

srcs = $(c_srcs) $(cpp_srcs)

#
# Objects
# -------------------------------------- #
# -------------------------------------- #
#cxx_objs := ${cxx_srcs:.C=.o}
#cxx_objs += ${cpp_srcs:.cpp=.o}
#c_objs := ${c_srcs:.c=.o}
basenames := $(basename $(srcs))
objs := $(addsuffix .o,$(basenames))
#objs_without_main := $(filter-out $(name).o,$(objs))
deps = $(objs:.o=.d)
